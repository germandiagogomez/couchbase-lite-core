<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LiteCore: Documents</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LiteCore
   </div>
   <div id="projectbrief">Couchbase Lite cross-platform core implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Documents</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c4_revision.html">C4Revision</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes a revision of a document.  <a href="struct_c4_revision.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c4_document.html">C4Document</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes a version-controlled document.  <a href="struct_c4_document.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c4_doc_put_request.html">C4DocPutRequest</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameters for adding a revision using c4doc_put.  <a href="struct_c4_doc_put_request.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6898a92b18343c5afd9c7aa7fc767a18"><td class="memItemLeft" align="right" valign="top">typedef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga6898a92b18343c5afd9c7aa7fc767a18">C4_OPTIONS</a> (uint32_t, C4DocumentFlags)</td></tr>
<tr class="memdesc:ga6898a92b18343c5afd9c7aa7fc767a18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags describing a document.  <a href="#ga6898a92b18343c5afd9c7aa7fc767a18">More...</a><br /></td></tr>
<tr class="separator:ga6898a92b18343c5afd9c7aa7fc767a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a4eaab4327f187a3babc326bd47b26f"><td class="memItemLeft" align="right" valign="top">typedef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga0a4eaab4327f187a3babc326bd47b26f">C4_OPTIONS</a> (uint8_t, C4RevisionFlags)</td></tr>
<tr class="memdesc:ga0a4eaab4327f187a3babc326bd47b26f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags that apply to a revision.  <a href="#ga0a4eaab4327f187a3babc326bd47b26f">More...</a><br /></td></tr>
<tr class="separator:ga0a4eaab4327f187a3babc326bd47b26f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Fleece-related</h2></td></tr>
<tr class="memitem:ga0dc1ee07a15b5dbcc447e2dce8462845"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga0dc1ee07a15b5dbcc447e2dce8462845">c4doc_bodyAsJSON</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga0dc1ee07a15b5dbcc447e2dce8462845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translates the body of the selected revision from Fleece to JSON.  <a href="#ga0dc1ee07a15b5dbcc447e2dce8462845">More...</a><br /></td></tr>
<tr class="separator:ga0dc1ee07a15b5dbcc447e2dce8462845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab18dbf2816de61ba6624c2d18ebe6a58"><td class="memItemLeft" align="right" valign="top">struct _FLEncoder *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gab18dbf2816de61ba6624c2d18ebe6a58">c4db_createFleeceEncoder</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gab18dbf2816de61ba6624c2d18ebe6a58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a Fleece encoder for creating documents for a given database.  <a href="#gab18dbf2816de61ba6624c2d18ebe6a58">More...</a><br /></td></tr>
<tr class="separator:gab18dbf2816de61ba6624c2d18ebe6a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52cf6e7cf88b0acc0e418ffda7eff33c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga52cf6e7cf88b0acc0e418ffda7eff33c">c4db_encodeJSON</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *, <a class="el" href="struct_c4_slice.html">C4Slice</a> jsonData, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga52cf6e7cf88b0acc0e418ffda7eff33c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encodes JSON data to Fleece, to store into a document.  <a href="#ga52cf6e7cf88b0acc0e418ffda7eff33c">More...</a><br /></td></tr>
<tr class="separator:ga52cf6e7cf88b0acc0e418ffda7eff33c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9924face6bdccdeee9ae2b850c52397"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_f_l_dict_key.html">FLDictKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gaa9924face6bdccdeee9ae2b850c52397">c4db_initFLDictKey</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *db, <a class="el" href="struct_c4_slice.html">C4Slice</a> string) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="separator:gaa9924face6bdccdeee9ae2b850c52397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga844f8637b99045131722c6ea0236cbb7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___fleece.html#gabbd898ed871a7b340c817b6facba7568">FLSharedKeys</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga844f8637b99045131722c6ea0236cbb7">c4db_getFLSharedKeys</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *db) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="separator:ga844f8637b99045131722c6ea0236cbb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Lifecycle</h2></td></tr>
<tr class="memitem:ga488eb8bd83dbccdf5437b467edcd4e1e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga488eb8bd83dbccdf5437b467edcd4e1e">c4doc_get</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *database, <a class="el" href="struct_c4_slice.html">C4Slice</a> docID, bool mustExist, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga488eb8bd83dbccdf5437b467edcd4e1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a document from the database.  <a href="#ga488eb8bd83dbccdf5437b467edcd4e1e">More...</a><br /></td></tr>
<tr class="separator:ga488eb8bd83dbccdf5437b467edcd4e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb39058b93d4cb9b588f7c107115caf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gadb39058b93d4cb9b588f7c107115caf9">c4doc_getBySequence</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *database, <a class="el" href="c4_base_8h.html#a6c2d959939ef287ba3f2ee719c949229">C4SequenceNumber</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gadb39058b93d4cb9b588f7c107115caf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a document from the database given its sequence number.  <a href="#gadb39058b93d4cb9b588f7c107115caf9">More...</a><br /></td></tr>
<tr class="separator:gadb39058b93d4cb9b588f7c107115caf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga461ce68ac463297ac3523ab211438fe1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga461ce68ac463297ac3523ab211438fe1">c4doc_getType</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga461ce68ac463297ac3523ab211438fe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the document type (as set by setDocType.) This value is ignored by LiteCore itself; by convention Couchbase Lite sets it to the value of the current revision's "type" property, and uses it as an optimization when indexing a view.  <a href="#ga461ce68ac463297ac3523ab211438fe1">More...</a><br /></td></tr>
<tr class="separator:ga461ce68ac463297ac3523ab211438fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee3fe53b0191109d455d338a50cdf904"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gaee3fe53b0191109d455d338a50cdf904">c4doc_setType</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="struct_c4_slice.html">C4Slice</a> docType) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gaee3fe53b0191109d455d338a50cdf904"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a document's docType.  <a href="#gaee3fe53b0191109d455d338a50cdf904">More...</a><br /></td></tr>
<tr class="separator:gaee3fe53b0191109d455d338a50cdf904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad3e2513dc7bf7e142f7a426ed714eac2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gad3e2513dc7bf7e142f7a426ed714eac2">c4doc_save</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, uint32_t maxRevTreeDepth, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gad3e2513dc7bf7e142f7a426ed714eac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves changes to a <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document. ">C4Document</a>.  <a href="#gad3e2513dc7bf7e142f7a426ed714eac2">More...</a><br /></td></tr>
<tr class="separator:gad3e2513dc7bf7e142f7a426ed714eac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga613747ae2d6093521e73a13409648770"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga613747ae2d6093521e73a13409648770">c4doc_free</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga613747ae2d6093521e73a13409648770"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document. ">C4Document</a>.  <a href="#ga613747ae2d6093521e73a13409648770">More...</a><br /></td></tr>
<tr class="separator:ga613747ae2d6093521e73a13409648770"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Revisions</h2></td></tr>
<tr class="memitem:ga3e82c6034e5c600634e508cb5f2b84b2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga3e82c6034e5c600634e508cb5f2b84b2">c4doc_selectRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="struct_c4_slice.html">C4Slice</a> revID, bool withBody, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga3e82c6034e5c600634e508cb5f2b84b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects a specific revision of a document (or no revision, if revID is NULL.)  <a href="#ga3e82c6034e5c600634e508cb5f2b84b2">More...</a><br /></td></tr>
<tr class="separator:ga3e82c6034e5c600634e508cb5f2b84b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa37c7e1bceda10cb4f4bf7b395f3a101"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gaa37c7e1bceda10cb4f4bf7b395f3a101">c4doc_selectCurrentRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gaa37c7e1bceda10cb4f4bf7b395f3a101"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the current revision of a document.  <a href="#gaa37c7e1bceda10cb4f4bf7b395f3a101">More...</a><br /></td></tr>
<tr class="separator:gaa37c7e1bceda10cb4f4bf7b395f3a101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0df69d4b2b5d5afdf986649f1050387b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga0df69d4b2b5d5afdf986649f1050387b">c4doc_loadRevisionBody</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga0df69d4b2b5d5afdf986649f1050387b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populates the body field of a doc's selected revision, if it was initially loaded without its body.  <a href="#ga0df69d4b2b5d5afdf986649f1050387b">More...</a><br /></td></tr>
<tr class="separator:ga0df69d4b2b5d5afdf986649f1050387b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb246497d65c37b12afbbdeaad7462aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gaeb246497d65c37b12afbbdeaad7462aa">c4doc_detachRevisionBody</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gaeb246497d65c37b12afbbdeaad7462aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfers ownership of the document's <code>selectedRev.body</code> to the caller, without copying.  <a href="#gaeb246497d65c37b12afbbdeaad7462aa">More...</a><br /></td></tr>
<tr class="separator:gaeb246497d65c37b12afbbdeaad7462aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a7c996c4ed4a8983112baccf6c1175b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga5a7c996c4ed4a8983112baccf6c1175b">c4doc_hasRevisionBody</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga5a7c996c4ed4a8983112baccf6c1175b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the body of the selected revision is available, i.e.  <a href="#ga5a7c996c4ed4a8983112baccf6c1175b">More...</a><br /></td></tr>
<tr class="separator:ga5a7c996c4ed4a8983112baccf6c1175b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2318d2fa88eca9707a34bf792e3f0d3f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga2318d2fa88eca9707a34bf792e3f0d3f">c4doc_selectParentRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga2318d2fa88eca9707a34bf792e3f0d3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the parent of the selected revision, if it's known, else returns NULL.  <a href="#ga2318d2fa88eca9707a34bf792e3f0d3f">More...</a><br /></td></tr>
<tr class="separator:ga2318d2fa88eca9707a34bf792e3f0d3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07448ff2da4bf29b9d6992a581ee941b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga07448ff2da4bf29b9d6992a581ee941b">c4doc_selectNextRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga07448ff2da4bf29b9d6992a581ee941b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the next revision in priority order.  <a href="#ga07448ff2da4bf29b9d6992a581ee941b">More...</a><br /></td></tr>
<tr class="separator:ga07448ff2da4bf29b9d6992a581ee941b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59c59b91ce8a95460641b83c0df7721a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga59c59b91ce8a95460641b83c0df7721a">c4doc_selectNextLeafRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, bool includeDeleted, bool withBody, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga59c59b91ce8a95460641b83c0df7721a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the next leaf revision; like selectNextRevision but skips over non-leaves.  <a href="#ga59c59b91ce8a95460641b83c0df7721a">More...</a><br /></td></tr>
<tr class="separator:ga59c59b91ce8a95460641b83c0df7721a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3937aeca006224c34acf984425b4890"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gaf3937aeca006224c34acf984425b4890">c4rev_getGeneration</a> (<a class="el" href="struct_c4_slice.html">C4Slice</a> revID) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gaf3937aeca006224c34acf984425b4890"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a revision ID, returns its generation number (the decimal number before the hyphen), or zero if it's unparseable.  <a href="#gaf3937aeca006224c34acf984425b4890">More...</a><br /></td></tr>
<tr class="separator:gaf3937aeca006224c34acf984425b4890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac49a73c45fdb7c3c80d9670c1673c1a6"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gac49a73c45fdb7c3c80d9670c1673c1a6">c4doc_purgeRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="struct_c4_slice.html">C4Slice</a> revID, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gac49a73c45fdb7c3c80d9670c1673c1a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a branch from a document's history.  <a href="#gac49a73c45fdb7c3c80d9670c1673c1a6">More...</a><br /></td></tr>
<tr class="separator:gac49a73c45fdb7c3c80d9670c1673c1a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Purging and Expiration</h2></td></tr>
<tr class="memitem:gaed5af444c3b612602ee4f2ea1ae0e9dd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gaed5af444c3b612602ee4f2ea1ae0e9dd">c4db_purgeDoc</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *database, <a class="el" href="struct_c4_slice.html">C4Slice</a> docID, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gaed5af444c3b612602ee4f2ea1ae0e9dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all trace of a document and its revisions from the database.  <a href="#gaed5af444c3b612602ee4f2ea1ae0e9dd">More...</a><br /></td></tr>
<tr class="separator:gaed5af444c3b612602ee4f2ea1ae0e9dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga469b658b4bc9867b81315fafbc952804"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga469b658b4bc9867b81315fafbc952804">c4doc_setExpiration</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *db, <a class="el" href="struct_c4_slice.html">C4Slice</a> docId, uint64_t timestamp, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga469b658b4bc9867b81315fafbc952804"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets an expiration date on a document.  <a href="#ga469b658b4bc9867b81315fafbc952804">More...</a><br /></td></tr>
<tr class="separator:ga469b658b4bc9867b81315fafbc952804"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ad47d136b4a2779a1a0bc2fc6d288a1"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga1ad47d136b4a2779a1a0bc2fc6d288a1">c4doc_getExpiration</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *db, <a class="el" href="struct_c4_slice.html">C4Slice</a> docId) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga1ad47d136b4a2779a1a0bc2fc6d288a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the expiration time of a document, if one has been set, else 0.  <a href="#ga1ad47d136b4a2779a1a0bc2fc6d288a1">More...</a><br /></td></tr>
<tr class="separator:ga1ad47d136b4a2779a1a0bc2fc6d288a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Creating and Updating Documents</h2></td></tr>
<tr class="memitem:ga895b3d2bdc37285974cad3d6749dfd7d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga895b3d2bdc37285974cad3d6749dfd7d">c4doc_put</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *database, const <a class="el" href="struct_c4_doc_put_request.html">C4DocPutRequest</a> *request, size_t *outCommonAncestorIndex, <a class="el" href="struct_c4_error.html">C4Error</a> *outError) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga895b3d2bdc37285974cad3d6749dfd7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A high-level Put operation, to insert a new or downloaded revision.  <a href="#ga895b3d2bdc37285974cad3d6749dfd7d">More...</a><br /></td></tr>
<tr class="separator:ga895b3d2bdc37285974cad3d6749dfd7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad73989b71c165693fbe0864ff1a1867c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#gad73989b71c165693fbe0864ff1a1867c">c4doc_generateRevID</a> (<a class="el" href="struct_c4_slice.html">C4Slice</a> body, <a class="el" href="struct_c4_slice.html">C4Slice</a> parentRevID, bool deletion) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:gad73989b71c165693fbe0864ff1a1867c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the revision ID for a new document revision.  <a href="#gad73989b71c165693fbe0864ff1a1867c">More...</a><br /></td></tr>
<tr class="separator:gad73989b71c165693fbe0864ff1a1867c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06a138bdcd4b3b5f935d031d7f4d1060"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___documents.html#ga06a138bdcd4b3b5f935d031d7f4d1060">c4doc_generateOldStyleRevID</a> (bool generateOldStyle) <a class="el" href="c4_base_8h.html#a58e05642a5ffd7b621ed01bbd8fe7868">C4API</a></td></tr>
<tr class="memdesc:ga06a138bdcd4b3b5f935d031d7f4d1060"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set this to true to make c4doc_generateRevID and c4doc_put create revision IDs that are identical to the ones Couchbase Lite 1.0&ndash;1.2 would create.  <a href="#ga06a138bdcd4b3b5f935d031d7f4d1060">More...</a><br /></td></tr>
<tr class="separator:ga06a138bdcd4b3b5f935d031d7f4d1060"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6898a92b18343c5afd9c7aa7fc767a18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6898a92b18343c5afd9c7aa7fc767a18">&sect;&nbsp;</a></span>C4_OPTIONS() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef C4_OPTIONS </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">C4DocumentFlags&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags describing a document. </p>
<p>&lt; The document's current revision is deleted.</p>
<p>&lt; The document is in conflict.</p>
<p>&lt; The document's current revision has attachments.</p>
<p>&lt; The document exists (i.e. has revisions.) </p>

</div>
</div>
<a id="ga0a4eaab4327f187a3babc326bd47b26f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a4eaab4327f187a3babc326bd47b26f">&sect;&nbsp;</a></span>C4_OPTIONS() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef C4_OPTIONS </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">C4RevisionFlags&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags that apply to a revision. </p>
<p>&lt; Is this revision a deletion/tombstone?</p>
<p>&lt; Is this revision a leaf (no children?)</p>
<p>&lt; Has this rev been inserted since the doc was read?</p>
<p>&lt; Does this rev's body contain attachments? </p>

</div>
</div>
<a id="gab18dbf2816de61ba6624c2d18ebe6a58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab18dbf2816de61ba6624c2d18ebe6a58">&sect;&nbsp;</a></span>c4db_createFleeceEncoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct _FLEncoder* c4db_createFleeceEncoder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a Fleece encoder for creating documents for a given database. </p>

</div>
</div>
<a id="ga52cf6e7cf88b0acc0e418ffda7eff33c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga52cf6e7cf88b0acc0e418ffda7eff33c">&sect;&nbsp;</a></span>c4db_encodeJSON()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a> c4db_encodeJSON </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>jsonData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encodes JSON data to Fleece, to store into a document. </p>

</div>
</div>
<a id="ga844f8637b99045131722c6ea0236cbb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga844f8637b99045131722c6ea0236cbb7">&sect;&nbsp;</a></span>c4db_getFLSharedKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___fleece.html#gabbd898ed871a7b340c817b6facba7568">FLSharedKeys</a> c4db_getFLSharedKeys </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gaa9924face6bdccdeee9ae2b850c52397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa9924face6bdccdeee9ae2b850c52397">&sect;&nbsp;</a></span>c4db_initFLDictKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_f_l_dict_key.html">FLDictKey</a> c4db_initFLDictKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gaed5af444c3b612602ee4f2ea1ae0e9dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed5af444c3b612602ee4f2ea1ae0e9dd">&sect;&nbsp;</a></span>c4db_purgeDoc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4db_purgeDoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>docID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes all trace of a document and its revisions from the database. </p>

</div>
</div>
<a id="ga0dc1ee07a15b5dbcc447e2dce8462845"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0dc1ee07a15b5dbcc447e2dce8462845">&sect;&nbsp;</a></span>c4doc_bodyAsJSON()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a> c4doc_bodyAsJSON </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Translates the body of the selected revision from Fleece to JSON. </p>

</div>
</div>
<a id="gaeb246497d65c37b12afbbdeaad7462aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeb246497d65c37b12afbbdeaad7462aa">&sect;&nbsp;</a></span>c4doc_detachRevisionBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a> c4doc_detachRevisionBody </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transfers ownership of the document's <code>selectedRev.body</code> to the caller, without copying. </p>
<p>The <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document. ">C4Document</a>'s field is cleared, and the value returned from this function. As witt all C4SliceResult values, the caller is responsible for freeing it when finished. </p>

</div>
</div>
<a id="ga613747ae2d6093521e73a13409648770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga613747ae2d6093521e73a13409648770">&sect;&nbsp;</a></span>c4doc_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c4doc_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees a <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document. ">C4Document</a>. </p>

</div>
</div>
<a id="ga06a138bdcd4b3b5f935d031d7f4d1060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06a138bdcd4b3b5f935d031d7f4d1060">&sect;&nbsp;</a></span>c4doc_generateOldStyleRevID()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c4doc_generateOldStyleRevID </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>generateOldStyle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set this to true to make c4doc_generateRevID and c4doc_put create revision IDs that are identical to the ones Couchbase Lite 1.0&ndash;1.2 would create. </p>
<p>These use MD5 digests. </p>

</div>
</div>
<a id="gad73989b71c165693fbe0864ff1a1867c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad73989b71c165693fbe0864ff1a1867c">&sect;&nbsp;</a></span>c4doc_generateRevID()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a> c4doc_generateRevID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>parentRevID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deletion</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates the revision ID for a new document revision. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">body</td><td>The (JSON) body of the revision, exactly as it'll be stored. </td></tr>
    <tr><td class="paramname">parentRevID</td><td>The revID of the parent revision, or null if there's none. </td></tr>
    <tr><td class="paramname">deletion</td><td>True if this revision is a deletion. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new revID. Caller is responsible for freeing its buf. </dd></dl>

</div>
</div>
<a id="ga488eb8bd83dbccdf5437b467edcd4e1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga488eb8bd83dbccdf5437b467edcd4e1e">&sect;&nbsp;</a></span>c4doc_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_c4_document.html">C4Document</a>* c4doc_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>docID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mustExist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a document from the database. </p>
<p>If there's no such document, the behavior depends on the mustExist flag. If it's true, NULL is returned. If it's false, a valid but empty <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document. ">C4Document</a> is returned, that doesn't yet exist in the database (but will be added when saved.) The current revision is selected (if the document exists.) </p>

</div>
</div>
<a id="gadb39058b93d4cb9b588f7c107115caf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb39058b93d4cb9b588f7c107115caf9">&sect;&nbsp;</a></span>c4doc_getBySequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_c4_document.html">C4Document</a>* c4doc_getBySequence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="c4_base_8h.html#a6c2d959939ef287ba3f2ee719c949229">C4SequenceNumber</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a document from the database given its sequence number. </p>

</div>
</div>
<a id="ga1ad47d136b4a2779a1a0bc2fc6d288a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ad47d136b4a2779a1a0bc2fc6d288a1">&sect;&nbsp;</a></span>c4doc_getExpiration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t c4doc_getExpiration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>docId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the expiration time of a document, if one has been set, else 0. </p>

</div>
</div>
<a id="ga461ce68ac463297ac3523ab211438fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga461ce68ac463297ac3523ab211438fe1">&sect;&nbsp;</a></span>c4doc_getType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a> c4doc_getType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the document type (as set by setDocType.) This value is ignored by LiteCore itself; by convention Couchbase Lite sets it to the value of the current revision's "type" property, and uses it as an optimization when indexing a view. </p>

</div>
</div>
<a id="ga5a7c996c4ed4a8983112baccf6c1175b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5a7c996c4ed4a8983112baccf6c1175b">&sect;&nbsp;</a></span>c4doc_hasRevisionBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4doc_hasRevisionBody </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the body of the selected revision is available, i.e. </p>
<p>if <a class="el" href="group___documents.html#ga0df69d4b2b5d5afdf986649f1050387b" title="Populates the body field of a doc&#39;s selected revision, if it was initially loaded without its body...">c4doc_loadRevisionBody()</a> would succeed. </p>

</div>
</div>
<a id="ga0df69d4b2b5d5afdf986649f1050387b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0df69d4b2b5d5afdf986649f1050387b">&sect;&nbsp;</a></span>c4doc_loadRevisionBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4doc_loadRevisionBody </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Populates the body field of a doc's selected revision, if it was initially loaded without its body. </p>

</div>
</div>
<a id="gac49a73c45fdb7c3c80d9670c1673c1a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac49a73c45fdb7c3c80d9670c1673c1a6">&sect;&nbsp;</a></span>c4doc_purgeRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t c4doc_purgeRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>revID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a branch from a document's history. </p>
<p>The revID must correspond to a leaf revision; that revision and its ancestors will be removed, except for ancestors that are shared with another branch. If the document has only one branch (no conflicts), or if the input revID is null, the purge will remove every revision, and saving the document will purge it (remove it completely from the database.) Must be called within a transaction. Remember to save the document afterwards. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc</td><td>The document. </td></tr>
    <tr><td class="paramname">revID</td><td>The ID of the revision to purge. If null, all revisions are purged. </td></tr>
    <tr><td class="paramname">outError</td><td>Error information is stored here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total number of revisions purged (including ancestors), or -1 on error. </dd></dl>

</div>
</div>
<a id="ga895b3d2bdc37285974cad3d6749dfd7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga895b3d2bdc37285974cad3d6749dfd7d">&sect;&nbsp;</a></span>c4doc_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_c4_document.html">C4Document</a>* c4doc_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c4_doc_put_request.html">C4DocPutRequest</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>outCommonAncestorIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A high-level Put operation, to insert a new or downloaded revision. </p>
<p>If request-&gt;existingRevision is true, then request-&gt;history must contain the revision's history, with the revision's ID as the first item. Otherwise, a new revision will be created and assigned a revID. The parent revision ID, if any, should be given as the single item of request-&gt;history. Either way, on success the document is returned with the inserted revision selected. Note that actually saving the document back to the database is optional &ndash; it only happens if request-&gt;save is true. You can set this to false if you want to review the changes before saving, e.g. to run them through a validation function. </p>

</div>
</div>
<a id="gad3e2513dc7bf7e142f7a426ed714eac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad3e2513dc7bf7e142f7a426ed714eac2">&sect;&nbsp;</a></span>c4doc_save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4doc_save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxRevTreeDepth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves changes to a <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document. ">C4Document</a>. </p>
<p>Must be called within a transaction. The revision history will be pruned to the maximum depth given. </p>

</div>
</div>
<a id="gaa37c7e1bceda10cb4f4bf7b395f3a101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa37c7e1bceda10cb4f4bf7b395f3a101">&sect;&nbsp;</a></span>c4doc_selectCurrentRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4doc_selectCurrentRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the current revision of a document. </p>
<p>(This is the first revision, in the order they appear in the document.) </p>

</div>
</div>
<a id="ga59c59b91ce8a95460641b83c0df7721a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59c59b91ce8a95460641b83c0df7721a">&sect;&nbsp;</a></span>c4doc_selectNextLeafRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4doc_selectNextLeafRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>includeDeleted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>withBody</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the next leaf revision; like selectNextRevision but skips over non-leaves. </p>
<p>To distinguish between the end of the iteration and a failure, check the value of outError after the function returns false: if there's no error (code==0) it's normal. </p>

</div>
</div>
<a id="ga07448ff2da4bf29b9d6992a581ee941b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga07448ff2da4bf29b9d6992a581ee941b">&sect;&nbsp;</a></span>c4doc_selectNextRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4doc_selectNextRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the next revision in priority order. </p>
<p>This can be used to iterate over all revisions, starting from the current revision. </p>

</div>
</div>
<a id="ga2318d2fa88eca9707a34bf792e3f0d3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2318d2fa88eca9707a34bf792e3f0d3f">&sect;&nbsp;</a></span>c4doc_selectParentRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4doc_selectParentRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the parent of the selected revision, if it's known, else returns NULL. </p>

</div>
</div>
<a id="ga3e82c6034e5c600634e508cb5f2b84b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3e82c6034e5c600634e508cb5f2b84b2">&sect;&nbsp;</a></span>c4doc_selectRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4doc_selectRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>revID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>withBody</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects a specific revision of a document (or no revision, if revID is NULL.) </p>

</div>
</div>
<a id="ga469b658b4bc9867b81315fafbc952804"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga469b658b4bc9867b81315fafbc952804">&sect;&nbsp;</a></span>c4doc_setExpiration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4doc_setExpiration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>docId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets an expiration date on a document. </p>
<p>After this time the document will be purged from the database. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>The database to set the expiration date in </td></tr>
    <tr><td class="paramname">docId</td><td>The ID of the document to set the expiration date for </td></tr>
    <tr><td class="paramname">timestamp</td><td>The UNIX timestamp of the expiration date (must be in the future, i.e. after the current value of time()). A value of 0 indicates that the expiration should be cancelled. </td></tr>
    <tr><td class="paramname">outError</td><td>Information about any error that occurred </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on sucess, false on failure </dd></dl>

</div>
</div>
<a id="gaee3fe53b0191109d455d338a50cdf904"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaee3fe53b0191109d455d338a50cdf904">&sect;&nbsp;</a></span>c4doc_setType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c4doc_setType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td>
          <td class="paramname"><em>doc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>docType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a document's docType. </p>
<p>(By convention this is the value of the "type" property of the current revision's JSON; this value can be used as optimization when indexing a view.) The change will not be persisted until the document is saved. </p>

</div>
</div>
<a id="gaf3937aeca006224c34acf984425b4890"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf3937aeca006224c34acf984425b4890">&sect;&nbsp;</a></span>c4rev_getGeneration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned c4rev_getGeneration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_slice.html">C4Slice</a>&#160;</td>
          <td class="paramname"><em>revID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a revision ID, returns its generation number (the decimal number before the hyphen), or zero if it's unparseable. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
